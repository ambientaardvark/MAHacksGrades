<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap - Prebuilt Layout</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	  <link href="GeneralCSS.css" rel="stylesheet">
	  <script src="../public/client.js"></script>
	  
	  <script src="../jquery-3.3.1.min.js"></script>
	
  </head>
  <body>
    <script>
            var client;
			
            window.addEventListener("load",function(){
                client = new Client("ws://127.0.0.1:5524");
				
                 document.getElementById("createAccountButton").addEventListener("click", function() {
                    var username = document.getElementById("emailInput").value;
                    var password = document.getElementById("passwordInput").value;
                    var firstname = document.getElementById("firstNameInput").value;
                    var lastname = document.getElementById("lastNameInput").value;
					var confirm = document.getElementById("confirmInput").value;
					$(".hasError").removeClass("hasError");
					$("small").empty();
					if(password==confirm && firstname!="" && lastname!="" && username!="" && password!=""){
                    	client.sendCreateUser(username, password, firstname, lastname);
						window.location.href = "selectSchool.html";
					}
					if(password!=confirm && !$("#confirmInput").hasClass("hasError")){
						$("#confirmInput").addClass("hasError");
						$("#passwordMismatchError").append("Passwords do not match");
					} 
					if (password=="" && !$("#confirmInput").hasClass("hasError")){
						$("#confirmInput").addClass("hasError");
						$("#passwordMismatchError").append("Please enter a password");
					}
					if(firstname=="" && !$("#firstNameInput").hasClass("hasError")){
						$("#firstNameInput").addClass("hasError");
						$("#firstNameError").append("Please enter your first name");
					}
					if(lastname=="" && !$("#lastNameInput").hasClass("hasError")){
						$("#lastNameInput").addClass("hasError");
						$("#lastNameError").append("Please enter your last name");
					}
					if(username=="" && !$("#emailInput").hasClass("hasError")){
						$("#emailInput").addClass("hasError");
						$("#emailError").append("Please enter your email");
					}
					if(password=="" && !$("#passwordInput").hasClass("hasError")){
						$("#passwordInput").addClass("hasError");
						$("#passwordError").append("Please enter your password");
					}
                })
            });
        </script>
    <div class="container h-100">
		<div class="row justify-content-center allign-self-center logincard">
			
			<div class="col-md-4 col-sm-10">
				<img src="logo.gif" alt="Logo" style="align-content: left" class="smallLogo">
				<h4 class="my-0 font-weight-normal cardheader">Create Account</h4>
       			<div class="card-deck mb-3 text-center">
					
					<div class="card mb-4 shadow-sm">
						<div class="card-body">
							<form>
								<div class="form-group">
									<input type="text" id="firstNameInput" class="form-control nameInput" placeholder="first name" required>
									<small id="firstNameError" class="form-text"></small>
								</div>
								<div class="form-group">
									<input type="text" id="lastNameInput" class="form-control nameInput" placeholder="last name" required>
									<small id="lastNameError" class="form-text"></small>
								</div>
								<div class="form-group">
									<input type="email" id="emailInput" class="form-control" placeholder="email" required>
									<small id="emailError" class="form-text"></small>
								</div>
								<div class="form-group">
									<input type="password" id="passwordInput" class="form-control" placeholder="password" required>
									<small id="passwordError" class="form-text"></small>
								</div>
								<div class="form-group" id="confirmField">
									<input type="password" id="confirmInput" class="form-control" placeholder="confirm password" required>
									<small id="passwordMismatchError" class="form-text"></small>
								</div>
								<button type="button" id="createAccountButton" class="btn btn-primary"><a href="https://www.grades.tech/selectSchool.html">Create Account</a></button>
								
							</form>
						</div>
					</div>
				</div>
				
			</div>
			
		</div>
		
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 

    <!-- Include all compiled plugins (below), or include individual files as needed --> 
    <script src="../popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
	
	  
  </body>
</html>
